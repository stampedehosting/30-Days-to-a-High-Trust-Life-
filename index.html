<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>30 Days to a High-Trust Life | Transform Your Leadership Through Trust</title>
    <meta name="description" content="Join the global TrustFlow movement. A co-authored book and coaching program to build, sustain, and repair trust in leadership and life." />
    <script type="module" crossorigin src="assets/index-0QNlH1ZJ.js"></script>
    <link rel="stylesheet" crossorigin href="assets/index-CKK-Pm5d.css">
  </head>
  <body>
    <div id="root"></div>

    <!-- Persistent booking link (opens LeadConnector booking in a new tab) -->
    <a
      href="https://api.leadconnectorhq.com/widget/bookings/jeffrey-morris-personal-calendar-qtvcbubsc"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Book a time with Jeffrey Morris"
      style="position:fixed;bottom:20px;right:20px;z-index:1000;background:#0066cc;color:#ffffff;padding:10px 14px;border-radius:10px;text-decoration:none;font-weight:600;box-shadow:0 8px 20px rgba(0,0,0,0.12);"
      >Book a time</a
    >

    <!-- Persistent FAQs link (navigates to internal FAQs page) -->
    <a
      href="/faqs.html"
      aria-label="Read Frequently Asked Questions"
      style="position:fixed;bottom:68px;right:20px;z-index:1000;background:#0a7f5a;color:#ffffff;padding:10px 14px;border-radius:10px;text-decoration:none;font-weight:600;box-shadow:0 8px 20px rgba(0,0,0,0.12);"
      >FAQs</a
    >

    <!-- Runtime overrides: ensure CTA and FAQs nav behave as desired without modifying the compiled bundle -->
    <script>
      (function () {
        const BOOKING_URL = 'https://api.leadconnectorhq.com/widget/bookings/jeffrey-morris-personal-calendar-qtvcbubsc';
  const CANONICAL_FAQS = '/faqs.html';
  const CANONICAL_SUBMISSION = '/page-submission/';

        function normalizeHref(href) {
          if (!href) return href;
          try {
            const u = new URL(href, window.location.origin);
            if (u.origin !== window.location.origin) return href; // leave external links alone
            if (u.pathname === '/faqs') u.pathname = CANONICAL_FAQS;
            if (u.pathname === '/page-submission') u.pathname = CANONICAL_SUBMISSION;
            return u.pathname + u.search + u.hash;
          } catch {
            return href;
          }
        }

        function rewriteInternalLinks(root = document) {
          const anchors = root.querySelectorAll('a[href]');
          anchors.forEach(a => {
            const oldHref = a.getAttribute('href');
            const newHref = normalizeHref(oldHref);
            if (newHref && newHref !== oldHref) {
              a.setAttribute('href', newHref);
            }
          });
        }

        // Intercept clicks early (capture phase) so SPA handlers don't take over first
        document.addEventListener(
          'click',
          function (e) {
            try {
              const target = e.target && (e.target.closest ? e.target.closest('a,button,[role="button"]') : null);
              if (!target) return;

              const text = (target.textContent || '').trim().toLowerCase();

              // 1) Route any "Book a 15-minute Chat" button to LeadConnector in a new tab
              const isBook15MinChat =
                text.includes('book a 15-minute chat') ||
                (text.includes('book a 15') && text.includes('chat'));
              const isBookCallSponsoring =
                (text.includes('book a call') && text.includes('jeff') && text.includes('morris')) ||
                text.includes('sponsoring author');
              if (isBook15MinChat || isBookCallSponsoring) {
                e.preventDefault();
                window.open(BOOKING_URL, '_blank', 'noopener');
                return;
              }

              // 2) Normalize any FAQs link that points to "/faqs" (no slash or SPA) to our static page
              if (target.tagName === 'A') {
                const href = target.getAttribute('href') || '';
                const abs = window.location.origin + href;
                const textTarget = (target.textContent || '').toLowerCase();

                // FAQs canonicalization
                if (href === '/faqs' || abs === window.location.origin + '/faqs') {
                  e.preventDefault();
                  window.location.assign(CANONICAL_FAQS);
                  return;
                }

                // Page Submission: force full page load to static page for both /page-submission and /page-submission/
                const isSubmissionHref =
                  href === '/page-submission' ||
                  href === '/page-submission/' ||
                  abs === window.location.origin + '/page-submission' ||
                  abs === window.location.origin + '/page-submission/';
                const isSubmissionText = textTarget.includes('page submission');
                if (isSubmissionHref || isSubmissionText) {
                  e.preventDefault();
                  window.location.assign(CANONICAL_SUBMISSION);
                  return;
                }
              }
            } catch (err) {
              // Fail quietly to avoid impacting the app
            }
          },
          true
        );

        // Initial rewrite on load
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', () => rewriteInternalLinks());
        } else {
          rewriteInternalLinks();
        }

        // Observe DOM changes (SPA route changes, menu open, etc.) and rewrite links
        const mo = new MutationObserver(mutations => {
          for (const m of mutations) {
            if (m.type === 'childList') {
              m.addedNodes.forEach(node => {
                if (node.nodeType === 1) rewriteInternalLinks(node);
              });
            } else if (m.type === 'attributes' && m.target && m.attributeName === 'href') {
              if (m.target.tagName === 'A') rewriteInternalLinks(m.target);
            }
          }
        });
        mo.observe(document.documentElement, { childList: true, subtree: true, attributes: true, attributeFilter: ['href'] });

        // If someone lands on the SPA route directly, steer to the canonical static page
        if (window.location.pathname === '/page-submission') {
          window.location.replace(CANONICAL_SUBMISSION);
        }
      })();
    </script>
  </body>
</html>
